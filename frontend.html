<!-- frontend.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Loan Prediction — Input Form</title>
  <style>
    body {
      margin: 0;
      padding: 28px;
      background: #f5f7fb;
      font-family: Inter, system-ui;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: #fff;
      padding: 22px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(15, 23, 42, 0.06);
    }
    h1 { margin: 0 0 12px; font-size: 24px; font-weight: 700; }
    .field { background: #fbfdff; border: 1px solid #e6eef5; padding: 14px; border-radius: 10px; margin-bottom: 18px; }
    .field h3 { margin: 0 0 10px; font-size: 15px; }
    input, select { padding: 10px; border: 1px solid #ccc; border-radius: 8px; width: 100%; font-size: 15px; box-sizing: border-box; }
    .buttons { display:flex; gap:10px; margin-top:14px; }
    button { padding:10px 14px; border:none; border-radius:10px; font-weight:700; cursor:pointer; }
    .submit { background:#0ea5a4; color:white; }
    .reset { background:#374151; color:white; }
    #result { margin-top:20px; font-size:18px; font-weight:600; color:#0c4a6e; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Loan Repayment Prediction System</h1>

    <form id="loanForm">
      <div class="field"><h3>Gender *</h3>
        <select name="Gender" required>
          <option value="Male">Male</option>
          <option value="Female">Female</option> 
        </select>
      </div>
 
      <div class="field"><h3>Married *</h3>
        <select name="Married" required>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <div class="field"><h3>Dependents *</h3>
        <select name="Dependents" required>
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3+">3+</option>
        </select>
      </div>

      <div class="field"><h3>Education *</h3>
        <select name="Education" required>
          <option value="Graduate">Graduate</option>
          <option value="Not Graduate">Not Graduate</option>
        </select>
      </div>

      <div class="field"><h3>Self Employed *</h3>
        <select name="Self_Employed" required>
          <option value="No">No</option>
          <option value="Yes">Yes</option>
        </select>
      </div>

      <div class="field"><h3>Applicant Income *</h3>
        <input name="ApplicantIncome" type="number" value="5000" required>
      </div>

      <div class="field"><h3>Coapplicant Income *</h3>
        <input name="CoapplicantIncome" type="number" value="0" required>
      </div>

      <div class="field"><h3>Loan Amount (in thousands) *</h3>
        <input name="LoanAmount" type="number" value="66" is less then Aplicent income required>
      </div>

      <div class="field"><h3>Loan Term (months) *</h3>
        <input name="Loan_Amount_Term" type="number" value="360" required>
      </div>

      <div class="field"><h3>Credit History *</h3>
        <select name="Credit_History" required>
          <option value="1">1 (Good)</option>
          <option value="0">0 (No)</option>
        </select>
      </div>

      <div class="field"><h3>Property Area *</h3>
        <select name="Property_Area" required>
          <option value="Urban">Urban</option>
          <option value="Semiurban">Semiurban</option>
          <option value="Rural">Rural</option>
        </select>
      </div>

      <div class="buttons">
        <button type="submit" class="submit">Predict</button>
        <button type="reset" class="reset">Reset</button>
      </div>
    </form>

    <div id="result"></div>
  </div>

<script>
document.getElementById('loanForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const fd = new FormData(e.target);
  const payload = {};
  fd.forEach((v,k) => payload[k] = v);

  // send to backend
  try {
    const res = await fetch('http://127.0.0.1:5000/predict', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify(payload)
    });

    if (!res.ok) {
      const err = await res.json();
      document.getElementById('result').innerText = "Error: " + (err.error || res.statusText);
      return;
    }

    const j = await res.json();
    // j.prediction is integer 0 or 1
    const text = j.prediction === 1 ? "Eligible ✔" : "Not Eligible ❌";
    document.getElementById('result').innerText = `Prediction: ${text} (${j.prediction})`;
  } catch (err) {
    document.getElementById('result').innerText = "Network error: " + err.message;
  }
});
</script>
</body>
</html>
